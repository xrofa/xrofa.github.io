<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Usercentrics Documentation"><meta name=author content=Usercentrics><link href=https://usercentrics.com/docs/web/features/google-consent-mode/implementation-example/ rel=canonical><link rel=icon href=../../../../assets/favicon.ico><meta name=generator content="mkdocs-1.5.3, mkdocs-material-9.4.6"><title>Implementation example - UsercentricsDocs</title><link rel=stylesheet href=../../../../assets/stylesheets/main.35e1ed30.min.css><link rel=stylesheet href=../../../../stylesheets/extra.374729.min.css><script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script type=text/javascript>
    var _paq = window._paq || [];
    _paq.push(['setSecureCookie', true]);

    /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
    _paq.push(['trackPageView']);
    _paq.push(['enableLinkTracking']);
    (function () {
        var u = '//analytics.usercentrics.com/';
        _paq.push(['setTrackerUrl', u + 'matomo.php']);
        _paq.push(['setSiteId', '1']);
        var d = document, g = d.createElement('script'), s = d.getElementsByTagName('script')[0];
        g.type = 'text/javascript';
        g.async = true;
        g.defer = true;
        g.src = u + 'matomo.js';
        s.parentNode.insertBefore(g, s);
    })();
</script><script type=text/javascript>
		// create dataLayer
		window.dataLayer = window.dataLayer || [];

		// create uc-events layer
		window.ucEventsLayer = window.ucEventsLayer || [];

		function gtag() {
			dataLayer.push(arguments);
		}

		// set „denied” as default for both ad and analytics storage,
		gtag("consent", "default", {
			ad_storage: "denied",
			analytics_storage: "denied",
			wait_for_update: 2000 // milliseconds to wait for update
		});
		// Enable ads data redaction by default [optional]
		gtag("set", "ads_data_redaction", true);

</script><script type=text/plain data-usercentrics="Google Tag Manager">
      (function(w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({
          'gtm.start':
              new Date().getTime(), event: 'gtm.js',
        });
        var f = d.getElementsByTagName(s)[0],
            j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : '';
        j.async = true;
        j.src =
            'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
      })(window, document, 'script', 'dataLayer', 'GTM-K4K37P8');



</script><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-K4K37P8" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><script id=usercentrics-cmp src=https://web.cmp.usercentrics.eu/ui/loader.js data-ruleset-id=NFEcTLx7a></script><meta name=robots content="noindex, nofollow"></head> <body dir=ltr> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#step-1-adjust-the-existing-google-tag-manager-code class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../../.. title=UsercentricsDocs class="md-header__button md-logo" aria-label=UsercentricsDocs data-md-component=logo> <img src=../../../../assets/usercentrics-logo.min_.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> UsercentricsDocs </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Implementation example </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> </nav> <nav class="uc-header__menu md-grid"> <a href=../../../.. class="uc-header__item " target=_self>Home</a> <a href=../../../../config/account-config/ class="uc-header__item " target=_self>CMP Configuration</a> <a href=../../../intro/ class="uc-header__item " target=_self>For Web</a> <a href=../../../../apps/intro/ class="uc-header__item " target=_self>For Apps</a> <a href=../../../../games/intro/ class="uc-header__item " target=_self>For Mobile Games</a> <a href=../../../../tv/intro/ class="uc-header__item " target=_self>For TV</a> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../../.. title=UsercentricsDocs class="md-nav__button md-logo" aria-label=UsercentricsDocs data-md-component=logo> <img src=../../../../assets/usercentrics-logo.min_.svg alt=logo> </a> UsercentricsDocs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex> <span class=md-ellipsis> CMP Configuration </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> CMP Configuration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../config/account-config/ class=md-nav__link> <span class=md-ellipsis> Account Configuration </span> </a> </li> <li class=md-nav__item> <a href=../../../../config/banner-config/ class=md-nav__link> <span class=md-ellipsis> Banner Configuration </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex> <span class=md-ellipsis> For Web </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> For Web </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../intro/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex> <span class=md-ellipsis> For Apps </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> For Apps </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../apps/intro/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../../../../apps/specifications/ class=md-nav__link> <span class=md-ellipsis> Specifications </span> </a> </li> <li class=md-nav__item> <a href=../../../../apps/releases/ class=md-nav__link> <span class=md-ellipsis> Releases </span> </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_4> <label class=md-nav__link for=__nav_4_4 id=__nav_4_4_label tabindex> <span class=md-ellipsis> Integration </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4_4> <span class="md-nav__icon md-icon"></span> Integration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../apps/integration/install/ class=md-nav__link> <span class=md-ellipsis> Install </span> </a> </li> <li class=md-nav__item> <a href=../../../../apps/integration/configure/ class=md-nav__link> <span class=md-ellipsis> Configure </span> </a> </li> <li class=md-nav__item> <a href=../../../../apps/integration/initialize/ class=md-nav__link> <span class=md-ellipsis> Initialize </span> </a> </li> <li class=md-nav__item> <a href=../../../../apps/integration/collect-consent/ class=md-nav__link> <span class=md-ellipsis> Collect Consent </span> </a> </li> <li class=md-nav__item> <a href=../../../../apps/integration/apply-consent/ class=md-nav__link> <span class=md-ellipsis> Apply Consent </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_5> <label class=md-nav__link for=__nav_4_5 id=__nav_4_5_label tabindex> <span class=md-ellipsis> Optimization </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_5_label aria-expanded=false> <label class=md-nav__title for=__nav_4_5> <span class="md-nav__icon md-icon"></span> Optimization </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../apps/features/customization/ class=md-nav__link> <span class=md-ellipsis> UI Customization </span> </a> </li> <li class=md-nav__item> <a href=../../../../apps/features/ab-testing/ class=md-nav__link> <span class=md-ellipsis> A/B Testing </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_6> <label class=md-nav__link for=__nav_4_6 id=__nav_4_6_label tabindex> <span class=md-ellipsis> Features </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_6_label aria-expanded=false> <label class=md-nav__title for=__nav_4_6> <span class="md-nav__icon md-icon"></span> Features </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../apps/features/consent-mediation/ class=md-nav__link> <span class=md-ellipsis> Consent Mediation </span> </a> </li> <li class=md-nav__item> <a href=../../../../apps/features/restore-user-sessions/ class=md-nav__link> <span class=md-ellipsis> Restore User Sessions </span> </a> </li> <li class=md-nav__item> <a href=../../../../apps/features/webview-continuity/ class=md-nav__link> <span class=md-ellipsis> WebView Continuity </span> </a> </li> <li class=md-nav__item> <a href=../../../../apps/features/custom-hyperlinks/ class=md-nav__link> <span class=md-ellipsis> Custom Hyperlinks </span> </a> </li> <li class=md-nav__item> <a href=../../../../apps/features/build_own_ui/ class=md-nav__link> <span class=md-ellipsis> Build your own UI </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_7> <label class=md-nav__link for=__nav_4_7 id=__nav_4_7_label tabindex> <span class=md-ellipsis> Help </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_7_label aria-expanded=false> <label class=md-nav__title for=__nav_4_7> <span class="md-nav__icon md-icon"></span> Help </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../apps/help/att/ class=md-nav__link> <span class=md-ellipsis> App Tracking Transparency Framework (ATT) </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_8> <label class=md-nav__link for=__nav_4_8 id=__nav_4_8_label tabindex> <span class=md-ellipsis> Resources </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_8_label aria-expanded=false> <label class=md-nav__title for=__nav_4_8> <span class="md-nav__icon md-icon"></span> Resources </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../apps/resources/demos/ class=md-nav__link> <span class=md-ellipsis> Demos </span> </a> </li> <li class=md-nav__item> <a href=../../../../apps/resources/samples/ class=md-nav__link> <span class=md-ellipsis> Samples </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_9> <label class=md-nav__link for=__nav_4_9 id=__nav_4_9_label tabindex> <span class=md-ellipsis> API </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_9_label aria-expanded=false> <label class=md-nav__title for=__nav_4_9> <span class="md-nav__icon md-icon"></span> API </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../apps/api/core-api/ class=md-nav__link> <span class=md-ellipsis> Core API </span> </a> </li> <li class=md-nav__item> <a href=../../../../apps/api/event-api/ class=md-nav__link> <span class=md-ellipsis> Event API </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex> <span class=md-ellipsis> For Mobile Games </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> For Mobile Games </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../games/intro/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../../../../games/specifications/ class=md-nav__link> <span class=md-ellipsis> Specifications </span> </a> </li> <li class=md-nav__item> <a href=../../../../games/releases/ class=md-nav__link> <span class=md-ellipsis> Releases </span> </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_4> <label class=md-nav__link for=__nav_5_4 id=__nav_5_4_label tabindex> <span class=md-ellipsis> Integration </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_4_label aria-expanded=false> <label class=md-nav__title for=__nav_5_4> <span class="md-nav__icon md-icon"></span> Integration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../games/integration/install/ class=md-nav__link> <span class=md-ellipsis> Install </span> </a> </li> <li class=md-nav__item> <a href=../../../../games/integration/configure/ class=md-nav__link> <span class=md-ellipsis> Configure </span> </a> </li> <li class=md-nav__item> <a href=../../../../games/integration/initialize/ class=md-nav__link> <span class=md-ellipsis> Initialize </span> </a> </li> <li class=md-nav__item> <a href=../../../../games/integration/collect-consent/ class=md-nav__link> <span class=md-ellipsis> Collect Consent </span> </a> </li> <li class=md-nav__item> <a href=../../../../games/integration/apply_consent/ class=md-nav__link> <span class=md-ellipsis> Apply Consent </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_5> <label class=md-nav__link for=__nav_5_5 id=__nav_5_5_label tabindex> <span class=md-ellipsis> Features </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5_5> <span class="md-nav__icon md-icon"></span> Features </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../games/features/consent-mediation/ class=md-nav__link> <span class=md-ellipsis> Consent Mediation </span> </a> </li> <li class=md-nav__item> <a href=../../../../games/features/build_own_ui/ class=md-nav__link> <span class=md-ellipsis> Build your own UI </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_6> <label class=md-nav__link for=__nav_5_6 id=__nav_5_6_label tabindex> <span class=md-ellipsis> Help </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_6_label aria-expanded=false> <label class=md-nav__title for=__nav_5_6> <span class="md-nav__icon md-icon"></span> Help </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../games/help/att/ class=md-nav__link> <span class=md-ellipsis> App Tracking Transparency Framework (ATT) </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_7> <label class=md-nav__link for=__nav_5_7 id=__nav_5_7_label tabindex> <span class=md-ellipsis> API </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_7_label aria-expanded=false> <label class=md-nav__title for=__nav_5_7> <span class="md-nav__icon md-icon"></span> API </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../games/api/core-api/ class=md-nav__link> <span class=md-ellipsis> Core API </span> </a> </li> <li class=md-nav__item> <a href=../../../../games/api/event-api/ class=md-nav__link> <span class=md-ellipsis> Event API </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex> <span class=md-ellipsis> For TV </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> For TV </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../tv/intro/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../../../../tv/install/ class=md-nav__link> <span class=md-ellipsis> Install the TV SDK </span> </a> </li> <li class=md-nav__item> <a href=../../../../tv/config/ class=md-nav__link> <span class=md-ellipsis> Configure the Banner </span> </a> </li> <li class=md-nav__item> <a href=../../../../tv/present/ class=md-nav__link> <span class=md-ellipsis> Present the Banner </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#step-1-adjust-the-existing-google-tag-manager-code class=md-nav__link> Step 1: Adjust the existing Google Tag Manager code </a> </li> <li class=md-nav__item> <a href=#step-2-optional-use-the-usercentrics-cmp-events-to-signal-the-consent-status-via-the-consent-mode-api-for-custom-data-processing-services class=md-nav__link> Step 2 (optional): Use the Usercentrics CMP events to signal the consent status via the Consent Mode API for Custom Data Processing Services </a> </li> <li class=md-nav__item> <a href=#step-3-enable-google-consent-mode-on-the-usercentrics-admin-interface class=md-nav__link> Step 3: Enable Google Consent Mode on the Usercentrics Admin Interface </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1>Implementation example</h1> <p>Implementing Consent Mode with the Usercentrics CMP solution as an alternative to prior blocking requires the following:</p> <h2 id=step-1-adjust-the-existing-google-tag-manager-code>Step 1: Adjust the existing Google Tag Manager code<a class=headerlink href=#step-1-adjust-the-existing-google-tag-manager-code title="Permanent link">&para;</a></h2> <p>Your current Google Tag Manager code may currently look like this:</p> <div class=highlight><pre><span></span><code><span class=p>&lt;</span><span class=nt>script</span> <span class=na>type</span><span class=o>=</span><span class=s>&quot;text/plain&quot;</span> <span class=na>data-usercentrics</span><span class=o>=</span><span class=s>&quot;Google Tag Manager&quot;</span><span class=p>&gt;</span>
<span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>w</span><span class=p>,</span><span class=nx>d</span><span class=p>,</span><span class=nx>s</span><span class=p>,</span><span class=nx>l</span><span class=p>,</span><span class=nx>i</span><span class=p>){</span><span class=nx>w</span><span class=p>[</span><span class=nx>l</span><span class=p>]</span><span class=o>=</span><span class=nx>w</span><span class=p>[</span><span class=nx>l</span><span class=p>]</span><span class=o>||</span><span class=p>[];</span><span class=nx>w</span><span class=p>[</span><span class=nx>l</span><span class=p>].</span><span class=nx>push</span><span class=p>({</span><span class=s1>&#39;gtm.start&#39;</span><span class=o>:</span>
<span class=ow>new</span><span class=w> </span><span class=nb>Date</span><span class=p>().</span><span class=nx>getTime</span><span class=p>(),</span><span class=nx>event</span><span class=o>:</span><span class=s1>&#39;gtm.js&#39;</span><span class=p>});</span><span class=kd>var</span><span class=w> </span><span class=nx>f</span><span class=o>=</span><span class=nx>d</span><span class=p>.</span><span class=nx>getElementsByTagName</span><span class=p>(</span><span class=nx>s</span><span class=p>)[</span><span class=mf>0</span><span class=p>],</span>
<span class=nx>j</span><span class=o>=</span><span class=nx>d</span><span class=p>.</span><span class=nx>createElement</span><span class=p>(</span><span class=nx>s</span><span class=p>),</span><span class=nx>dl</span><span class=o>=</span><span class=nx>l</span><span class=o>!=</span><span class=s1>&#39;dataLayer&#39;</span><span class=o>?</span><span class=s1>&#39;&amp;l=&#39;</span><span class=o>+</span><span class=nx>l</span><span class=o>:</span><span class=s1>&#39;&#39;</span><span class=p>;</span><span class=nx>j</span><span class=p>.</span><span class=k>async</span><span class=o>=</span><span class=kc>true</span><span class=p>;</span><span class=nx>j</span><span class=p>.</span><span class=nx>src</span><span class=o>=</span>
<span class=s1>&#39;https://www.googletagmanager.com/gtm.js?id=&#39;</span><span class=o>+</span><span class=nx>i</span><span class=o>+</span><span class=nx>dl</span><span class=p>;</span><span class=nx>f</span><span class=p>.</span><span class=nx>parentNode</span><span class=p>.</span><span class=nx>insertBefore</span><span class=p>(</span><span class=nx>j</span><span class=p>,</span><span class=nx>f</span><span class=p>);</span>
<span class=p>})(</span><span class=nb>window</span><span class=p>,</span><span class=nb>document</span><span class=p>,</span><span class=err>’</span><span class=nx>script</span><span class=s1>&#39;,&#39;</span><span class=nx>dataLayer</span><span class=s1>&#39;,&#39;</span><span class=nx>GTM</span><span class=o>-</span><span class=nx>XXXXXX</span><span class=err>&#39;</span><span class=p>);&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</code></pre></div> <p>This needs to be changed to the following:</p> <div class="admonition note"> <p>Please make sure to put these scripts at the very top of the head tag and on the same order as below.</p> </div> <div class="admonition warning"> <p>To adjust the default measurement capabilities, set the default values for the command to run on every page of your site before any commands that send measurement data (such as config or event). For more information please check <a href=https://developers.google.com/tag-platform/devguides/consent#adjust_tag_behavior>Adjust Tag Behavior</a></p> </div> <div class=highlight><pre><span></span><code>    <span class=p>&lt;</span><span class=nt>script</span> <span class=na>type</span><span class=o>=</span><span class=s>&quot;text/javascript&quot;</span><span class=p>&gt;</span>
<span class=w>        </span><span class=c1>// create dataLayer</span>
<span class=w>        </span><span class=nb>window</span><span class=p>.</span><span class=nx>dataLayer</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>window</span><span class=p>.</span><span class=nx>dataLayer</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=p>[];</span>
<span class=w>        </span><span class=kd>function</span><span class=w> </span><span class=nx>gtag</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=nx>dataLayer</span><span class=p>.</span><span class=nx>push</span><span class=p>(</span><span class=nx>arguments</span><span class=p>);</span>
<span class=w>        </span><span class=p>}</span>

<span class=w>        </span><span class=c1>// set &quot;denied&quot; as default for both ad and analytics storage,</span>
<span class=w>        </span><span class=nx>gtag</span><span class=p>(</span><span class=s2>&quot;consent&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;default&quot;</span><span class=p>,</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=nx>ad_storage</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;denied&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=nx>analytics_storage</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;denied&quot;</span><span class=p>,</span>
<span class=w>            </span><span class=nx>wait_for_update</span><span class=o>:</span><span class=w> </span><span class=mf>2000</span><span class=w> </span><span class=c1>// milliseconds to wait for update</span>
<span class=w>        </span><span class=p>});</span>

<span class=w>        </span><span class=c1>// Enable ads data redaction by default [optional]</span>
<span class=w>        </span><span class=nx>gtag</span><span class=p>(</span><span class=s2>&quot;set&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;ads_data_redaction&quot;</span><span class=p>,</span><span class=w> </span><span class=kc>true</span><span class=p>);</span>
<span class=w>    </span><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>

    <span class=p>&lt;</span><span class=nt>script</span> <span class=na>type</span><span class=o>=</span><span class=s>&quot;text/javascript&quot;</span><span class=p>&gt;</span>
<span class=w>        </span><span class=c1>// Google Tag Manager</span>
<span class=w>        </span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>w</span><span class=p>,</span><span class=w> </span><span class=nx>d</span><span class=p>,</span><span class=w> </span><span class=nx>s</span><span class=p>,</span><span class=w> </span><span class=nx>l</span><span class=p>,</span><span class=w> </span><span class=nx>i</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>            </span><span class=nx>w</span><span class=p>[</span><span class=nx>l</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>w</span><span class=p>[</span><span class=nx>l</span><span class=p>]</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=p>[];</span>
<span class=w>            </span><span class=nx>w</span><span class=p>[</span><span class=nx>l</span><span class=p>].</span><span class=nx>push</span><span class=p>({</span>
<span class=w>                </span><span class=s1>&#39;gtm.start&#39;</span><span class=o>:</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nb>Date</span><span class=p>().</span><span class=nx>getTime</span><span class=p>(),</span>
<span class=w>                </span><span class=nx>event</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;gtm.js&#39;</span>
<span class=w>            </span><span class=p>});</span>
<span class=w>            </span><span class=kd>var</span><span class=w> </span><span class=nx>f</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>d</span><span class=p>.</span><span class=nx>getElementsByTagName</span><span class=p>(</span><span class=nx>s</span><span class=p>)[</span><span class=mf>0</span><span class=p>],</span>
<span class=w>                </span><span class=nx>j</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>d</span><span class=p>.</span><span class=nx>createElement</span><span class=p>(</span><span class=nx>s</span><span class=p>),</span>
<span class=w>                </span><span class=nx>dl</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>l</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=s1>&#39;dataLayer&#39;</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=s1>&#39;&amp;l=&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>l</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=s1>&#39;&#39;</span><span class=p>;</span>
<span class=w>            </span><span class=nx>j</span><span class=p>.</span><span class=k>async</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>true</span><span class=p>;</span>
<span class=w>            </span><span class=nx>j</span><span class=p>.</span><span class=nx>src</span><span class=w> </span><span class=o>=</span>
<span class=w>                </span><span class=s1>&#39;https://www.googletagmanager.com/gtm.js?id=&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>i</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>dl</span><span class=p>;</span>
<span class=w>            </span><span class=nx>f</span><span class=p>.</span><span class=nx>parentNode</span><span class=p>.</span><span class=nx>insertBefore</span><span class=p>(</span><span class=nx>j</span><span class=p>,</span><span class=w> </span><span class=nx>f</span><span class=p>);</span>
<span class=w>        </span><span class=p>})(</span><span class=nb>window</span><span class=p>,</span><span class=w> </span><span class=nb>document</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;script&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;dataLayer&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;GTM-XXXXX&#39;</span><span class=p>);</span><span class=w> </span><span class=c1>//replace GTM-XXXXXX with Google Tag Manager ID</span>
<span class=w>    </span><span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</code></pre></div> <details class=help> <summary>Explanation</summary> <ul> <li>The first part of the script initializes a plain data layer and provides the gtag function before the gtm.js/gtag.js is loaded</li> </ul> <div class=highlight><pre><span></span><code><span class=p>&lt;</span><span class=nt>script</span> <span class=na>type</span><span class=o>=</span><span class=s>&quot;text/javascript&quot;</span><span class=p>&gt;</span>
<span class=w>    </span><span class=c1>// create dataLayer</span>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
        dataLayer.push(arguments);
    }
</code></pre></div> <ul> <li>In the middle part of the code the default values for both Consent Mode keys ad_storage and analytics_storage are defined. Additionally we set ads_data_redaction to true which means, that ad-click identifiers (e.g., GCLID / DCLID) in consent and conversion pings are redacted and network requests will also be sent through a cookieless domain. This is only in effect when ad_storage is set to 'denied', if ad_storage is 'granted', ads_data_redaction has no effect. Setting ads_data_redaction to true is optional. More details on behaviour can be found <a href="https://support.google.com/analytics/answer/9976101?hl=en">here</a>.</li> </ul> <div class=highlight><pre><span></span><code><span class=w>  </span><span class=c1>// set &quot;denied&quot; as default for both ad and analytics storage,</span>
<span class=w>  </span><span class=nx>gtag</span><span class=p>(</span><span class=s2>&quot;consent&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;default&quot;</span><span class=p>,</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=nx>ad_storage</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;denied&quot;</span><span class=p>,</span>
<span class=w>      </span><span class=nx>analytics_storage</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;denied&quot;</span><span class=p>,</span>
<span class=w>      </span><span class=nx>wait_for_update</span><span class=o>:</span><span class=w> </span><span class=mf>2000</span><span class=w> </span><span class=c1>// milliseconds to wait for update</span>
<span class=w>  </span><span class=p>});</span>

<span class=w>    </span><span class=c1>// Enable ads data redaction by default [optional]</span>
<span class=w>    </span><span class=nx>gtag</span><span class=p>(</span><span class=s2>&quot;set&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;ads_data_redaction&quot;</span><span class=p>,</span><span class=w> </span><span class=kc>true</span><span class=p>);</span>

<span class=w>    </span><span class=o>&lt;</span><span class=err>/script&gt;    </span>
</code></pre></div> <ul> <li>The last part is the Google Tag Manager script. If you want to use Consent Mode as alternative to prior blocking, the type of the script tag is "text/javascript". If you use the <a href=/pages/features/smart-data-protector>Smart Data Protector</a> you may have to exclude Google Tag Manager, Google Analytics and/or Google Ads Remarkting from being automatically blocked by the SDP.</li> </ul> <div class=highlight><pre><span></span><code><span class=p>&lt;</span><span class=nt>script</span> <span class=na>type</span><span class=o>=</span><span class=s>&quot;text/javascript&quot;</span><span class=p>&gt;</span>
<span class=w>    </span><span class=c1>// Google Tag Manager</span>
<span class=w>    </span><span class=p>(</span><span class=kd>function</span><span class=p>(</span><span class=nx>w</span><span class=p>,</span><span class=w> </span><span class=nx>d</span><span class=p>,</span><span class=w> </span><span class=nx>s</span><span class=p>,</span><span class=w> </span><span class=nx>l</span><span class=p>,</span><span class=w> </span><span class=nx>i</span><span class=p>)</span><span class=w> </span><span class=p>{</span><span class=w> </span>
<span class=w>        </span><span class=nx>w</span><span class=p>[</span><span class=nx>l</span><span class=p>]</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>w</span><span class=p>[</span><span class=nx>l</span><span class=p>]</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=p>[];</span>
<span class=w>        </span><span class=nx>w</span><span class=p>[</span><span class=nx>l</span><span class=p>].</span><span class=nx>push</span><span class=p>({</span>
<span class=w>            </span><span class=s1>&#39;gtm.start&#39;</span><span class=o>:</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=nb>Date</span><span class=p>().</span><span class=nx>getTime</span><span class=p>(),</span>
<span class=w>            </span><span class=nx>event</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;gtm.js&#39;</span>
<span class=w>        </span><span class=p>});</span>
<span class=w>        </span><span class=kd>var</span><span class=w> </span><span class=nx>f</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>d</span><span class=p>.</span><span class=nx>getElementsByTagName</span><span class=p>(</span><span class=nx>s</span><span class=p>)[</span><span class=mf>0</span><span class=p>],</span>
<span class=w>            </span><span class=nx>j</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>d</span><span class=p>.</span><span class=nx>createElement</span><span class=p>(</span><span class=nx>s</span><span class=p>),</span>
<span class=w>            </span><span class=nx>dl</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>l</span><span class=w> </span><span class=o>!=</span><span class=w> </span><span class=s1>&#39;dataLayer&#39;</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=s1>&#39;&amp;l=&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>l</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=s1>&#39;&#39;</span><span class=p>;</span>
<span class=w>        </span><span class=nx>j</span><span class=p>.</span><span class=k>async</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>true</span><span class=p>;</span>
<span class=w>        </span><span class=nx>j</span><span class=p>.</span><span class=nx>src</span><span class=w> </span><span class=o>=</span>
<span class=w>            </span><span class=s1>&#39;https://www.googletagmanager.com/gtm.js?id=&#39;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>i</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>dl</span><span class=p>;</span>
<span class=w>        </span><span class=nx>f</span><span class=p>.</span><span class=nx>parentNode</span><span class=p>.</span><span class=nx>insertBefore</span><span class=p>(</span><span class=nx>j</span><span class=p>,</span><span class=w> </span><span class=nx>f</span><span class=p>);</span>
<span class=w>    </span><span class=p>})(</span><span class=nb>window</span><span class=p>,</span><span class=w> </span><span class=nb>document</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;script&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;dataLayer&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;GTM-XXXXX&#39;</span><span class=p>);</span><span class=w> </span><span class=c1>//replace GTM-XXXXXX with Google Tag Manager ID</span>
<span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</code></pre></div> </details> <hr> <h2 id=step-2-optional-use-the-usercentrics-cmp-events-to-signal-the-consent-status-via-the-consent-mode-api-for-custom-data-processing-services>Step 2 (optional): Use the Usercentrics CMP events to signal the consent status via the Consent Mode API for Custom Data Processing Services<a class=headerlink href=#step-2-optional-use-the-usercentrics-cmp-events-to-signal-the-consent-status-via-the-consent-mode-api-for-custom-data-processing-services title="Permanent link">&para;</a></h2> <div class="admonition warning"> <p>In case you use custom data processing services, follow the steps below. Otherwise, please jump to step 3.</p> </div> <p>In order to trigger the Consent Mode API for custom Data Processing Services, you need to first add a window event. On the <a href=https://admin.usercentrics.eu/ >Admin Interface</a> under <strong>Implementation -&gt; Web</strong> please click on <strong>Add new Data Layer</strong> and select <strong>Window Event</strong>. Then expand the <strong>Window Event</strong> card and on the <strong>Window Event Name</strong> field, please insert the name of the event. It can be anything, but just make sure to use the same event name on the script below. Then click on the <strong>+</strong> button and click <strong>Save</strong>.</p> <p>Assuming you already have a window event in your Usercentrics CMP, add the following script to call the Consent Mode API in order to update the consent mode keys based on the consent status. In this example we use the event name 'ucEvent' and the 2 custom data processing services 'Google Ads Remarketing' and 'Google Analytics'. (If you have chosen to use different names for the data processing services use your customized ones instead.)</p> <div class=highlight><pre><span></span><code><span class=p>&lt;</span><span class=nt>script</span> <span class=na>type</span><span class=o>=</span><span class=s>&quot;text/javascript&quot;</span><span class=p>&gt;</span>
<span class=c1>// Please replace &#39;ucEvent&#39; with the event you have just created</span>
<span class=nb>window</span><span class=p>.</span><span class=nx>addEventListener</span><span class=p>(</span><span class=s2>&quot;ucEvent&quot;</span><span class=p>,</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=p>(</span><span class=nx>e</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>    </span><span class=k>if</span><span class=p>(</span><span class=w> </span><span class=nx>e</span><span class=p>.</span><span class=nx>detail</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=nx>e</span><span class=p>.</span><span class=nx>detail</span><span class=p>.</span><span class=nx>event</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=s2>&quot;consent_status&quot;</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
<span class=w>        </span><span class=c1>// Please replace the analytics service name here with the customized service    </span>
<span class=w>        </span><span class=kd>var</span><span class=w> </span><span class=nx>ucAnalyticsService</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;Google Analytics&#39;</span><span class=p>;</span>
<span class=w>        </span><span class=c1>// Please replace the ad service name here with the customized service</span>
<span class=w>        </span><span class=kd>var</span><span class=w> </span><span class=nx>ucAdService</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;Google Ads Remarketing&#39;</span><span class=p>;</span>

<span class=w>        </span><span class=k>if</span><span class=p>(</span><span class=nx>e</span><span class=p>.</span><span class=nx>detail</span><span class=p>.</span><span class=nx>hasOwnProperty</span><span class=p>(</span><span class=nx>ucAnalyticsService</span><span class=p>)</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=nx>e</span><span class=p>.</span><span class=nx>detail</span><span class=p>.</span><span class=nx>hasOwnProperty</span><span class=p>(</span><span class=nx>ucAdService</span><span class=p>))</span>
<span class=w>        </span><span class=p>{</span>
<span class=w>            </span><span class=nx>gtag</span><span class=p>(</span><span class=s2>&quot;consent&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;update&quot;</span><span class=p>,</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=nx>ad_storage</span><span class=o>:</span><span class=w> </span><span class=nx>e</span><span class=p>.</span><span class=nx>detail</span><span class=p>[</span><span class=nx>ucAdService</span><span class=p>]</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=s1>&#39;granted&#39;</span><span class=o>:</span><span class=s1>&#39;denied&#39;</span><span class=p>,</span>
<span class=w>                </span><span class=nx>analytics_storage</span><span class=o>:</span><span class=w> </span><span class=nx>e</span><span class=p>.</span><span class=nx>detail</span><span class=p>[</span><span class=nx>ucAnalyticsService</span><span class=p>]</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=s1>&#39;granted&#39;</span><span class=o>:</span><span class=s1>&#39;denied&#39;</span>
<span class=w>            </span><span class=p>});</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>        </span><span class=k>else</span><span class=w> </span><span class=p>{</span><span class=w>            </span>
<span class=w>            </span><span class=k>if</span><span class=p>(</span><span class=nx>e</span><span class=p>.</span><span class=nx>detail</span><span class=p>.</span><span class=nx>hasOwnProperty</span><span class=p>(</span><span class=nx>ucAdService</span><span class=p>))</span><span class=w> </span><span class=p>{</span>
<span class=w>                </span><span class=nx>gtag</span><span class=p>(</span><span class=s2>&quot;consent&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;update&quot;</span><span class=p>,</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=nx>ad_storage</span><span class=o>:</span><span class=w> </span><span class=nx>e</span><span class=p>.</span><span class=nx>detail</span><span class=p>[</span><span class=nx>ucAdService</span><span class=p>]</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=s1>&#39;granted&#39;</span><span class=o>:</span><span class=s1>&#39;denied&#39;</span>
<span class=w>                </span><span class=p>});</span>
<span class=w>            </span><span class=p>}</span><span class=w>            </span>
<span class=w>            </span><span class=k>if</span><span class=p>(</span><span class=nx>e</span><span class=p>.</span><span class=nx>detail</span><span class=p>.</span><span class=nx>hasOwnProperty</span><span class=p>(</span><span class=nx>ucAnalyticsService</span><span class=p>))</span><span class=w> </span><span class=p>{</span>
<span class=w>              </span><span class=nx>gtag</span><span class=p>(</span><span class=s2>&quot;consent&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;update&quot;</span><span class=p>,</span><span class=w> </span><span class=p>{</span>
<span class=w>                    </span><span class=nx>analytics_storage</span><span class=o>:</span><span class=w> </span><span class=nx>e</span><span class=p>.</span><span class=nx>detail</span><span class=p>[</span><span class=nx>ucAnalyticsService</span><span class=p>]</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=s1>&#39;granted&#39;</span><span class=o>:</span><span class=s1>&#39;denied&#39;</span>
<span class=w>                </span><span class=p>});</span>
<span class=w>            </span><span class=p>}</span>
<span class=w>        </span><span class=p>}</span>
<span class=w>    </span><span class=p>}</span>
<span class=p>});</span>
<span class=p>&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</code></pre></div> <details class=help> <summary>Explanation</summary> <ul> <li>The event is fired on each page load and every time the user actively changes his consent decision.</li> <li>Based on the status for both services the Consent Mode API is called to signal the granted or denied state.</li> </ul> </details> <hr> <h2 id=step-3-enable-google-consent-mode-on-the-usercentrics-admin-interface>Step 3: Enable Google Consent Mode on the Usercentrics Admin Interface<a class=headerlink href=#step-3-enable-google-consent-mode-on-the-usercentrics-admin-interface title="Permanent link">&para;</a></h2> <div class="admonition warning"> <p>For new customers, Google Consent Mode is enabled by default.</p> </div> <p>Assuming you've completed the steps above, it's now time to enable the feature.</p> <p>Go to <strong>Usercentrics Admin Interface -&gt; Configuration -&gt; CMP Settings</strong>, enable Google Consent Mode and click Save.</p> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> </div> </main> <footer id=footer-page class="uc_footer container_wrap"> <div id=_footer class="md-grid footer-container"> <div class=uc_footer__rules-row> <div class=uc_footer__rules-col> <span class="uc_footer__rules__rule ">© Copyright 2023 Usercentrics GmbH</span> <a href=https://usercentrics.com/privacy-policy/ class="uc_footer__rules__rule rule-link">Privacy Policy</a> <a href=https://usercentrics.com/terms-and-conditions/ class="uc_footer__rules__rule rule-link">Terms &amp; Conditions</a> <a href=https://usercentrics.com/legal-notice/ class="uc_footer__rules__rule rule-link">Legal Notice</a> </div> <div class="uc_footer__rules-col social"> <div class=wbq_footer_selectors> <div class="wbq_dropdown_selector wbq_dropdown_selector--loaded" data-type=language> <div class=wbq_dropdown_selector__current data-language=en_US> <img src=https://usercentrics.com/wp-content/themes/usercentrics/img/footer/globe.svg alt=Language width=20 height=20 data-lazy-src=/wp-content/themes/usercentrics/img/footer/globe.svg data-ll-status=loaded class="entered lazyloaded"> <noscript><img src=https://usercentrics.com/wp-content/themes/usercentrics/img/footer/globe.svg alt=Language width=20 height=20></noscript> <span> English </span> </div> <div class=wbq_dropdown_selector__menu> <a class=wbq_dropdown_selector__menu-item href=https://usercentrics.com/de/ data-language=de_DE> Deutsch </a> <a class=wbq_dropdown_selector__menu-item href=https://usercentrics.com/br/ data-language=pt_BR> Português </a> <a class=wbq_dropdown_selector__menu-item href=https://usercentrics.com/fr/ data-language=fr_FR> Français </a> <a class=wbq_dropdown_selector__menu-item href=https://usercentrics.com/it/ data-language=it_IT> Italiano </a> <a class=wbq_dropdown_selector__menu-item href=https://usercentrics.com/es/ data-language=es_ES> Español </a> </div> </div> </div> <div class=wbq_footer_social_networks> <a href=https://instagram.com/usercentrics/ class=wbq_footer_social target=_blank> <img src=https://usercentrics.com/wp-content/themes/usercentrics/img/footer/social-instagram.svg width=20 height=20 alt=instagram data-lazy-src=/wp-content/themes/usercentrics/img/footer/social-instagram.svg data-ll-status=loaded class="entered lazyloaded"> <noscript><img src=https://usercentrics.com/wp-content/themes/usercentrics/img/footer/social-instagram.svg width=20 height=20 alt=instagram></noscript> </a> <a href=https://www.facebook.com/usercentrics/ class=wbq_footer_social target=_blank> <img src=https://usercentrics.com/wp-content/themes/usercentrics/img/footer/social-facebook.svg width=20 height=20 alt=facebook data-lazy-src=/wp-content/themes/usercentrics/img/footer/social-facebook.svg data-ll-status=loaded class="entered lazyloaded"> <noscript><img src=https://usercentrics.com/wp-content/themes/usercentrics/img/footer/social-facebook.svg width=20 height=20 alt=facebook></noscript> </a> <a href=https://twitter.com/usercentrics class=wbq_footer_social target=_blank> <img src=https://usercentrics.com/wp-content/themes/usercentrics/img/footer/social-twitter.svg width=20 height=20 alt=twitter data-lazy-src=/wp-content/themes/usercentrics/img/footer/social-twitter.svg data-ll-status=loaded class="entered lazyloaded"> <noscript><img src=https://usercentrics.com/wp-content/themes/usercentrics/img/footer/social-twitter.svg width=20 height=20 alt=twitter></noscript> </a> <a href=https://www.linkedin.com/company/usercentrics class=wbq_footer_social target=_blank> <img src=https://usercentrics.com/wp-content/themes/usercentrics/img/footer/social-linkedin.svg width=20 height=20 alt=linkedin data-lazy-src=/wp-content/themes/usercentrics/img/footer/social-linkedin.svg data-ll-status=loaded class="entered lazyloaded"> <noscript><img src=https://usercentrics.com/wp-content/themes/usercentrics/img/footer/social-linkedin.svg width=20 height=20 alt=linkedin></noscript> </a> </div> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../../..", "features": ["navigation.sections", "navigation.tabs", "navigation.tabs.sticky", "search.suggest", "content.tabs.link"], "search": "../../../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../../../assets/javascripts/bundle.aecac24b.min.js></script> <script src=../../../../javascripts/extra.f09ae8.min.js></script> <script src=../../../../javascripts/mathjax.js></script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script> </body> </html>